# -*- coding: utf-8; mode: _tcl; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- vim:fenc=utf-8:ft=tcl:et:sw=2:ts=2:sts=2

PortSystem          1.0
PortGroup           github 1.0

github.setup        qpdf qpdf 10.6.1 release-qpdf-
revision            0
checksums           rmd160  b2d8982cccce402d74c1b6c54bb6b277a82348fd \
sha256  4c56328e1eeedea3d87eb79e1fe09374a923fe28756f7a56bcff58523617f05f \
size    18518114

categories          textproc pdf
platforms           darwin
license             Apache-2
maintainers         {mps @Schamschula} openmaintainer

description         content-preserving PDF transformation system
long_description    QPDF is a command-line program that does structural, \
                    content-preserving transformations on PDF files.

homepage            http://qpdf.sourceforge.net/
github.tarball_from releases

depends_lib         path:include/turbojpeg.h:libjpeg-turbo \
                    port:libxml2 \
                    port:libxslt \
                    port:zlib

compiler.cxx_standard 2017

platform darwin 8 {
    depends_build-append \
                        port:gmake
    build.cmd           gmake
}

variant gnutls conflicts openssl description {Build against gnutls} {
    depends_lib-append  port:gnutls
    configure.args      --disable-crypto-openssl \
                        --enable-crypto-gnutls
}

variant openssl conflicts gnutls description {Build against openssl} {
    depends_lib-append  port:openssl
    configure.args      --disable-crypto-gnutls \
                        --enable-crypto-openssl
}

if {![variant_isset openssl]} {
    default_variants    +gnutls
}
