# -*- coding: utf-8; mode: _tcl; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- vim:fenc=utf-8:ft=tcl:et:sw=2:ts=2:sts=2

PortSystem                1.0
PortGroup           cxx11 1.1

name                qore
version             0.9.13
categories          lang
license             {LGPL-2.1 MIT}
maintainers         {davidnichols @davidnich} openmaintainer
use_bzip2           yes
description         multi-threaded embeddable scripting language
long_description    Qore is a scripting language designed for multi-threading and SMP scalability
homepage            http://qore.org
platforms           darwin
master_sites        https://github.com/qorelanguage/qore/releases/download/release-${version}

checksums           rmd160 3b188949abd2f6bd4fd31699a395791711ec31e2 \
sha256 cb6ab948f398df5ffcc0daae8c553b4443e69113647054e5691d3f2cbd9634c0 \
size 43394850

depends_build       port:flex \
                    port:bison

depends_lib         path:lib/libssl.dylib:openssl \
                    port:pcre \
                    port:zlib \
                    port:bzip2 \
                    port:gmp \
                    port:mpfr \
                    port:tbb

# --disable-dependency-tracking is safe here. The build is always done in one run.
#                               It's required to prevent autotools from using -M* options for multiple -arch options
configure.args      --disable-debug --disable-static --disable-dependency-tracking

# the autoconf check for iconv() in libiconv fails with GNU iconv, but we need it, so we turn it on anyway
configure.ldflags   -liconv
