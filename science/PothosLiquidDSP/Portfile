# -*- coding: utf-8; mode: _tcl; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- vim:fenc=utf-8:filetype=tcl:et:sw=2:ts=2:sts=2

PortSystem          1.0
PortGroup           github 1.0
PortGroup           cmake 1.1

platforms           darwin macosx
categories          science
license             Boost-1
maintainers         {ra1nb0w @ra1nb0w} {michaelld @michaelld} openmaintainer

description         Pothos toolkit for liquid DSP processing cores
long_description    This toolkit wraps Pothos blocks around the Liquid \
    DSP library. Blocks are generated from the liquid DSP include header \
    and a file describing the available functions and parameters. \

github.setup        pothosware PothosLiquidDSP 6bb28521e5e3de9b6e404427d37ef525a35340db
version             0.0.0-git-20201204
checksums           rmd160  7425ddaaa3df186de5ffb83a9b7564f9dd32145c \
sha256  1dc25c7a9a46bd2d80d4b8dee5179c13d25c8b3437de143249064f437ba97e74 \
size    37797
revision            0

compiler.cxx_standard 2017

# set Python version and variants
set PythonVersionNoDot "39"

# select Python to use; default to 3.0
variant python39 conflicts python37 description {Build using Python 3.9} {}
variant python37 conflicts python39 description {Build using Python 3.7} {}

if {![variant_isset python39] &&
    ![variant_isset python37]} {
    default_variants +python39
}


if {[variant_isset python39]} {
    set PythonVersionNoDot "39"
} else {
    set PythonVersionNoDot "37"
}
set PythonVersionWithDot [join [split ${PythonVersionNoDot} ""] "."]

depends_lib-append \
    port:PothosCore \
    port:liquid-dsp

depends_build-append \
    port:py${PythonVersionNoDot}-ply \
    port:py${PythonVersionNoDot}-yaml \
    port:py${PythonVersionNoDot}-mako

configure.args-append \
    -DPYTHON_EXECUTABLE=${frameworks_dir}/Python.framework/Versions/${PythonVersionWithDot}/bin/python${PythonVersionWithDot} \
    -DPYTHON_INCLUDE_DIR=${frameworks_dir}/Python.framework/Versions/${PythonVersionWithDot}/Headers \
    -DPYTHON_LIBRARY=${frameworks_dir}/Python.framework/Versions/${PythonVersionWithDot}/Python
