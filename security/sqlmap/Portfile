# -*- coding: utf-8; mode: _tcl; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- vim:fenc=utf-8:ft=tcl:et:sw=2:ts=2:sts=2

PortSystem          1.0
PortGroup           python 1.0

name                sqlmap
version             1.6.11
revision            0

categories          security databases python
maintainers         {judaew @judaew} openmaintainer
supported_archs     noarch
license             GPL-2+

description         Automatic SQL injection and database takeover tool
long_description    \
    sqlmap is an open source penetration testing tool that automates the \
    process of detecting and exploiting SQL injection flaws and taking over of \
    database servers. It comes with a powerful detection engine, many niche \
    features for the ultimate penetration tester, and a broad range of \
    switches including database fingerprinting, over data fetching from the \
    database, accessing the underlying file system, and executing commands on \
    the operating system via out-of-band connections.
homepage            https://sqlmap.org/

checksums           rmd160  e80ff5b99548e9fd397d099c3a560a05f475f88d \
sha256  ff3b9c0512dfe6a9d15114b4612dd9bf88f145960e206b733c17a943b6b69efb \
size    7199735

worksrcdir          ${name}

patchfiles          patch-cmd-usage-string.diff

post-patch {
    fs-traverse f ${worksrcpath} {
        switch [file extension ${f}] {
            .py {
                reinplace "s|^#! */usr/bin/env python\$|#!${python.bin}|" ${f}
            }
        }
    }
}


variant python310  \
    description {Build for Python 3.10} {
    python.default_version 310
    depends_build-append \
                    port:py${python.version}-setuptools
}


default_variants +python310

